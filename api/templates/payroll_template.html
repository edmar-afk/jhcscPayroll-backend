{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Payroll {{ payroll.id }}</title>
  </head>
  <body
    style="
      background-color: #f3f4f6;
      padding: 24px;
      font-family: Arial, sans-serif;
    "
  >
    <table
      style="
        width: 100%;
        max-width: 600px;
        background-color: white;
        border-radius: 24px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin: 80px auto;
        padding: 24px;
        border-collapse: collapse;
      "
    >
      <tr>
        <td
          colspan="2"
          style="padding-bottom: 16px; border-bottom: 1px dashed #d1d5db"
        >
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <div>
              <h3
                style="
                  margin: 0;
                  font-size: 18px;
                  font-weight: 600;
                  color: #374151;
                "
              >
                Payroll Details
              </h3>
              <p style="margin: 0; font-size: 12px; color: #6b7280">
                {{ payroll.staff.first_name }}
              </p>
            </div>
            <img
              src="https://jhcsc.edu.ph/wp-content/uploads/2024/12/jhcsclogo-transparent-1000x1000.png"
              alt="Logo"
              style="width: 48px"
            />
          </div>
        </td>
      </tr>

      <tr>
        <td colspan="2" style="height: 16px"></td>
      </tr>

      <!-- Payroll Info -->
      <tr>
        <td style="font-weight: 500; color: #374151">Salary:</td>
        <td style="color: #374151">₱{{ payroll.salary|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">Add: PERA / ACA:</td>
        <td style="color: #374151">₱{{ payroll.pera_aca|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">Gross Monthly Income:</td>
        <td style="color: #374151">
          ₱{{ payroll.monthly_income|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">PAYSLIP for the Month:</td>
        <td style="color: #374151">{{ payroll.date_release }}</td>
      </tr>

      <tr>
        <td colspan="2" style="height: 16px"></td>
      </tr>

      <!-- Government Shares & Deductions -->
      <tr>
        <td
          colspan="2"
          style="padding-top: 16px; border-top: 1px dashed #d1d5db"
        >
          <h4
            style="
              margin: 0 0 8px 0;
              font-weight: 600;
              font-size: 16px;
              color: #374151;
            "
          >
            Government Shares & Deductions
          </h4>
        </td>
      </tr>

      <tr>
        <td style="font-weight: 500; color: #374151">GSIS / Personal Share:</td>
        <td style="color: #374151">
          ₱{{ payroll.gsis_personal_share|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">
          GSIS / Consolidated Loan:
        </td>
        <td style="color: #374151">
          ₱{{ payroll.gsis_consolidated_loan|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">GSIS / MPL:</td>
        <td style="color: #374151">₱{{ payroll.gsis_mpl|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">
          GSIS / EDUC. ASST. LOAN:
        </td>
        <td style="color: #374151">₱{{ payroll.gsis_educ|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">GSIS / EMERGENCY LOAN:</td>
        <td style="color: #374151">
          ₱{{ payroll.gsis_emergency|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">PHIC:</td>
        <td style="color: #374151">₱{{ payroll.phic|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">HDMF / PERSONAL SHARE:</td>
        <td style="color: #374151">
          ₱{{ payroll.hdmf_personal_share|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">HDMF / SALARY LOAN:</td>
        <td style="color: #374151">
          ₱{{ payroll.hdmf_salary_load|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">FFASA:</td>
        <td style="color: #374151">₱{{ payroll.ffasa|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">1ST Valley Bank Loan:</td>
        <td style="color: #374151">
          ₱{{ payroll.valley_bank_load|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">HDMF / MPL:</td>
        <td style="color: #374151">₱{{ payroll.hdmf_mpl|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">BIR:</td>
        <td style="color: #374151">₱{{ payroll.bir|floatformat:2 }}</td>
      </tr>
      <tr>
        <td style="font-weight: 500; color: #374151">Date:</td>
        <td style="color: #374151">{{ payroll.date }}</td>
      </tr>

      <tr>
        <td
          colspan="2"
          style="
            padding-top: 8px;
            border-top: 1px solid #374151;
            font-weight: bold;
          "
        >
          TOTAL DEDUCTIONS: ₱{{ payroll.total_deductions|floatformat:2 }}
        </td>
      </tr>
      <tr>
        <td colspan="2" style="font-weight: bold; color: #047857">
          Net MONTHLY INCOME: ₱{{ payroll.net_monthly_income|floatformat:2 }}
        </td>
      </tr>

      {% if statusData %}
      <tr>
        <td colspan="2" style="padding-top: 16px">
          <h4
            style="
              margin: 0 0 16px 0;
              font-weight: 600;
              font-size: 16px;
              color: #374151;
              text-align: center;
            "
          >
            Payroll Status
          </h4>
          {% for dept, info in statusData.items %}
          <div
            style="
              border-bottom: 1px dashed #d1d5db;
              padding-bottom: 8px;
              margin-bottom: 8px;
            "
          >
            <p style="font-weight: 800; color: #1d4ed8; margin: 0">
              {{ dept|upper }}
            </p>
            <p style="margin: 0">Status: {{ info.status }}</p>
            <p style="margin: 0">Reason: {{ info.reason }}</p>
            <p style="margin: 0">Date Updated: {{ info.date_updated }}</p>
          </div>
          {% endfor %}
        </td>
      </tr>
      {% endif %}
    </table>
  </body>
</html>
